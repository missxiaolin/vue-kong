webpackJsonp([9],{KamI:function(e,t,a){"use strict";t.a=function(e){return Object(r.a)({url:"/kong/route/save",method:"post",data:e})},t.e=function(e){return Object(r.a)({url:"/kong/route/search",method:"post",data:e})},t.d=function(e){return Object(r.a)({url:"/kong/route/info",method:"post",params:e})},t.b=function(e){return Object(r.a)({url:"/kong/route/delete",method:"post",params:e})},t.c=function(e){return Object(r.a)({url:"/kong/route/lists",method:"get",params:e})};var r=a("BXx+")},v5Xj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Edqs"),n=a.n(r),s=a("Hmpo"),o=a.n(s),u=a("vYJH"),i=a.n(u),l=a("KamI"),c=a("vMJZ"),d=a("T452"),f={name:"route",data:function(){return{userPower:{user_route_add:0,user_route_delete:0},list:[],listLoading:!0,page:1,total:0,pagesize:10,searchForm:{size:50}}},filters:{statusFilter:function(e){return["success","danger"][e]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return i()(o.a.mark(function t(){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.c)(e.searchForm);case 2:return a=t.sent,t.next=5,Object(c.a)(e.userPower);case 5:r=t.sent,a.data.code==d.d&&(e.list=a.data.data.items,e.total=a.data.data.total,e.listLoading=!1),r.data.code==d.d&&(e.userPower=r.data.data);case 8:case"end":return t.stop()}},t,e)}))()},handleCurrentChange:function(e){n()(this.searchForm,{page:e}),this.fetchData()},addRoute:function(e){this.$router.push({path:"/user/route/add/"+e})},del:function(e){var t=this,a=this,r={id:e};this.$confirm("此操作将永久删除权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)(r).then(function(e){e.data.code==d.d&&(t.$message({type:"success",message:"删除成功!"}),a.fetchData())})})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._m(0),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.user_route_add,expression:"userPower.user_route_add != 0"}],attrs:{className:"sub-navbar"}},[[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addRoute(0)}}},[e._v("新建权限")])]],2),e._v(" "),a("div",{staticClass:"routes-main-container",staticStyle:{"margin-top":"20px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.id)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"路由名",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"路由规则"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.route))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"路由等级",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.type)}},[e._v(e._s(t.row.typeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"创建时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.created_at))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.user_route_add,expression:"userPower.user_route_add != 0"}],attrs:{size:"mini"},on:{click:function(a){e.addRoute(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.user_route_delete,expression:"userPower.user_route_delete != 0"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"},attrs:{type:"flex",justify:"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,"page-size":e.searchForm.size,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ibox-title"},[t("h3",[this._v("路由列表")])])}]},_=a("D8HT")(f,p,!1,null,null,null);t.default=_.exports}});
//# sourceMappingURL=9.fd6e32a5cdca9a9a4fd1.js.map