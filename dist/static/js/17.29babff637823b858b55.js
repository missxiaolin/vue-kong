webpackJsonp([17],{BiPK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("Hmpo"),a=r.n(o),s=r("vYJH"),i=r.n(s),n=r("BXx+");function l(e){return Object(n.a)({url:"/kong/consumer/add",method:"post",data:e})}function u(e){return Object(n.a)({url:"/kong/consumer/upload",method:"post",data:e})}var c=r("T452"),m=r("rV7I"),d={name:"consumer",data:function(){return{title:"",dialogFormVisible:!1,rules:{custom_id:{required:!1,message:"请输入消费者ID",trigger:"blur"},username:{required:!0,message:"请输入用户名称",trigger:"blur"}},ruleForm:{id:null,custom_id:"",username:""},consumerData:[]}},created:function(){this.consumerLists()},methods:{consumerLists:function(){var e=this;return i()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o=e.searchForm,Object(n.a)({url:"/kong/consumer/lists",method:"get",params:o});case 2:r=t.sent,e.loading=!0,r.data.code==c.d?(e.consumerData=r.data.data,e.loading=!1):Object(m.Message)(r.data.message);case 5:case"end":return t.stop()}var o},t,e)}))()},popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.dialogFormVisible=!0,0==e?(this.title="新建消费者",this.ruleForm.id=null,this.ruleForm.custom_id="",this.ruleForm.username=""):(this.title="编辑消费者",this.ruleForm.id=t.id,this.ruleForm.custom_id=t.custom_id,this.ruleForm.username=t.username)},handleDelete:function(e){var t=this,r=this,o={id:e};this.$confirm("此操作将永久删除服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=o,Object(n.a)({url:"/kong/consumer/delete",method:"get",params:e})).then(function(e){e.data.code==c.d&&(t.$message({type:"success",message:"删除成功!"}),r.consumerLists())})})},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.ruleForm.id?r.request(u):r.request(l)})},request:function(e){var t=this;return i()(a.a.mark(function r(){var o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e(t.ruleForm);case 2:o=r.sent,t.loading=!0,o.data.code==c.d?(t.dialogFormVisible=!1,t.consumerLists(),t.loading=!1):Object(m.Message)(o.data.message);case 5:case"end":return r.stop()}},r,t)}))()}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[e._m(0),e._v(" "),r("div",{staticClass:"ibox-content"},[r("el-row",{staticStyle:{"margin-top":"30px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.popup(0)}}},[e._v("新建消费者")]),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-position":"top",rules:e.rules}},[r("el-form-item",{attrs:{label:"消费者ID：",prop:"custom_id","label-width":"120px"}},[r("el-input",{model:{value:e.ruleForm.custom_id,callback:function(t){e.$set(e.ruleForm,"custom_id",t)},expression:"ruleForm.custom_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名称：",prop:"username","label-width":"120px"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.consumerData.data,border:""}},[r("el-table-column",{attrs:{prop:"username",label:"消费者名称",width:"300"}}),e._v(" "),r("el-table-column",{attrs:{prop:"custom_id",label:"ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){e.popup(t.row.id,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ibox-title"},[t("h3",[this._v("消费者列表")])])}]},f=r("D8HT")(d,p,!1,null,null,null);t.default=f.exports}});
//# sourceMappingURL=17.29babff637823b858b55.js.map