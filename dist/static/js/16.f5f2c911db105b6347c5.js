webpackJsonp([16],{o6O0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Hmpo"),r=n.n(a),o=n("vYJH"),s=n.n(o),u=n("VVuV"),l=n("vMJZ"),i=n("T452"),c=n("rV7I"),d={name:"routes-list",data:function(){return{userPower:{kong_routes_add:0,kong_routes_upload:0,kong_routes_delete:0},routesData:[]}},created:function(){this.routesLists()},methods:{routesLists:function(){var e=this;return s()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.a)();case 2:return n=t.sent,t.next=5,Object(l.a)(e.userPower);case 5:a=t.sent,e.loading=!0,n.data.code==i.d?(e.routesData=n.data.data,e.loading=!1):Object(c.Message)(n.data.message),a.data.code==i.d&&(e.userPower=a.data.data);case 9:case"end":return t.stop()}},t,e)}))()},handleAdd:function(){this.$router.push({path:"/kong/routes/add"})},handleEdit:function(e){this.$router.push({path:"/kong/routes/edit/"+e})},handleDelete:function(e){var t=this;return s()(r.a.mark(function n(){var a,o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=t,o={id:e},t.$confirm("此操作将永久删除服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.c)(o).then(function(e){e.data.code==i.d&&(t.$message({type:"success",message:"删除成功!"}),a.routesLists())})});case 3:case"end":return n.stop()}},n,t)}))()}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[e._m(0),e._v(" "),n("div",{staticClass:"ibox-content"},[n("el-row",{staticStyle:{"margin-top":"30px"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.kong_routes_add,expression:"userPower.kong_routes_add != 0"}],attrs:{type:"primary"},on:{click:function(t){e.handleAdd()}}},[e._v("新建路由")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.routesData.data,border:""}},[n("el-table-column",{attrs:{prop:"id",label:"路由Id"}}),e._v(" "),n("el-table-column",{attrs:{label:"发送方式"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.methods,function(a,r){return n("span",{key:r},[e._v(e._s(a)+"\n            "),r!=t.row.methods.length-1?n("em",[e._v("，")]):e._e()])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"匹配方式"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.protocols,function(a,r){return n("span",{key:r},[e._v(e._s(a)+"\n            "),r!=t.row.protocols.length-1?n("em",[e._v("，")]):e._e()])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"paths",label:"匹配路径"}}),e._v(" "),n("el-table-column",{attrs:{prop:"hosts",label:"域"}}),e._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.kong_routes_upload,expression:"userPower.kong_routes_upload != 0"}],attrs:{size:"mini"},on:{click:function(n){e.handleEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.kong_routes_delete,expression:"userPower.kong_routes_delete != 0"}],attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ibox-title"},[t("h3",[this._v("路由列表")])])}]},p=n("D8HT")(d,_,!1,null,null,null);t.default=p.exports}});
//# sourceMappingURL=16.f5f2c911db105b6347c5.js.map