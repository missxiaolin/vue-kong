{"version":3,"sources":["webpack:///./src/api/route.js","webpack:///src/view/router/add.vue","webpack:///./src/view/router/add.vue?ba09","webpack:///./src/view/router/add.vue"],"names":["data","Object","__WEBPACK_IMPORTED_MODULE_0__common_js_fetch__","url","method","params","router_add","rules","name","required","message","trigger","code","isEdit","resPidVisible","resTypeList","resTypeDesc","resType","resPidTipMsg","searchForm","pid","searchList","searchName","ruleForm","id","this","$route","is_hidden","noDropdown","icon","route","res_uri","level","type","created","routeInfo","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","info","wrap","_context","prev","next","sent","config","abrupt","levelName","stop","levelId","_this2","_callee2","_context2","onSubmit","formName","_this3","$refs","validate","valid","add","_this4","_callee3","_context3","$router","push","path","resetForm","resetFields","handleGetResPid","_this5","_callee4","_context4","length","chooseResPid","item","view_router_add","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label","prop","size","disabled","placeholder","value","callback","$$v","$set","expression","_l","key","_v","placement","width","autofocus","slot","on","click","index","$event","_s","directives","rawName","arg","readonly","trim","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.e0a8feba8a691d508483.js","sourcesContent":["import fetch from '@/common/js/fetch'\n\n/**\n * 新增权限\n * @param {*} data\n */\nexport function addRoute (data) {\n  return fetch({\n    url: '/kong/route/save',\n    method: 'post',\n    data: data\n  })\n}\n\n/**\n * 搜索\n * @param {*} data\n */\nexport function routeSearch (data) {\n  return fetch({\n    url: '/kong/route/search',\n    method: 'post',\n    data: data\n  })\n}\n\n/**\n * 规则详情\n * @param {*} data\n */\nexport function infoRoute (data) {\n  return fetch({\n    url: '/kong/route/info',\n    method: 'post',\n    params: data\n  })\n}\n\n/**\n * 规则删除\n * @param {*} data\n */\nexport function delRoute (data) {\n  return fetch({\n    url: '/kong/route/delete',\n    method: 'post',\n    params: data\n  })\n}\n\n/**\n * 路由列表\n * @param {*} data\n */\nexport function getRoutes (data) {\n  return fetch({\n    url: '/kong/route/lists',\n    method: 'get',\n    params: data\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/route.js","<template>\n    <div class=\"app-container\">\n        <el-form ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\" label-width=\"120px\">\n            <el-form-item label=\"资源类型：\" prop=\"pid\">\n              <el-select v-model=\"ruleForm.pid\" size=\"small\" :disabled=\"isEdit\" placeholder=\"请选择\">\n                  <el-option\n                  v-for=\"item in resTypeList\"\n                  :key=\"item.resType\"\n                  :label=\"item.resTypeDesc\"\n                  :value=\"item.resType\">\n                  </el-option>\n              </el-select>\n            </el-form-item>\n\n            <el-form-item label=\"上级资源名称：\">\n              <template v-if=\"ruleForm.pid != 0\">\n                <el-popover ref=\"searchPostPopover\" placement=\"bottom-start\" width=\"360\" v-model=\"resPidVisible\">\n                    <el-input placeholder=\"请输入上级资源名称\" :autofocus='true' size=\"small\" v-model=\"searchForm.name\">\n                        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"handleGetResPid\"></el-button>\n                    </el-input>\n                    <div class=\"search-group\" v-if=\"searchList.length > 0\">\n                        <dl v-for=\"(item ,index) in searchList\" :key=\"index\" @click=\"chooseResPid(item)\">\n                            <dd>资源名称：{{item.name}}</dd>\n                        </dl>\n                    </div>\n                    <div class=\"no-data-show\" v-else>\n                        {{resPidTipMsg}}\n                    </div>\n                </el-popover>\n                <div  v-popover:searchPostPopover  @click=\"resPidVisible = true; resPidTipMsg =''; searchForm.name ='';searchList =[]\">\n                  <el-input v-model.trim=\"searchName\"  size=\"small\" placeholder=\"上级资源名称\" readonly></el-input>\n                </div>\n              </template>\n\n              <template v-else>\n                  <el-input v-model.trim=\"searchName\"  size=\"small\" placeholder=\"上级资源名称信息\" disabled></el-input>\n              </template>\n            </el-form-item>\n\n            <el-form-item label=\"权限编码：\" prop=\"code\">\n                <el-input name=\"code\" type=\"text\" v-model=\"ruleForm.code\" placeholder=\"编码\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"名称：\" prop=\"name\">\n                <el-input name=\"name\" type=\"text\" v-model=\"ruleForm.name\" placeholder=\"路由名字\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"路由规则：\" prop=\"route\">\n                <el-input name=\"route\" type=\"text\" v-model=\"ruleForm.route\" placeholder=\"路由规则\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"图标：\" prop=\"icon\">\n                <el-input name=\"icon\" type=\"text\" v-model=\"ruleForm.icon\" placeholder=\"图标\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"目标地址：\" prop=\"res_uri\">\n                <el-input name=\"res_uri\" type=\"text\" v-model=\"ruleForm.res_uri\" placeholder=\"目标地址\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"是否显示：\" prop=\"is_hidden\">\n              <el-radio v-model=\"ruleForm.is_hidden\" label=\"false\">否</el-radio>\n              <el-radio v-model=\"ruleForm.is_hidden\" label=\"true\">是</el-radio>\n            </el-form-item>\n\n            <el-form-item label=\"列表是否显示：\" prop=\"noDropdown\">\n              <el-radio v-model=\"ruleForm.noDropdown\" label=\"false\">否</el-radio>\n              <el-radio v-model=\"ruleForm.noDropdown\" label=\"true\">是</el-radio>\n            </el-form-item>\n\n            <el-form-item label=\"路由：\" prop=\"type\">\n                <el-radio v-model=\"ruleForm.type\" :label=\"1\">系统路由</el-radio>\n                <el-radio v-model=\"ruleForm.type\" :label=\"0\">自定义路由</el-radio>\n            </el-form-item>\n\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"onSubmit('ruleForm')\">保存</el-button>\n                <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { addRoute, infoRoute, routeSearch } from 'api/route'\nimport { ERR_OK } from '@/api/config'\n\nexport default {\n  data () {\n    return {\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入路由名称',\n          trigger: 'blur'\n        }],\n        code: {\n          required: true,\n          message: '请输入编码',\n          trigger: 'blur'\n        }\n      },\n      isEdit: false,\n      resPidVisible: false,\n      resTypeList: [\n        {resTypeDesc: '模块', resType: 0},\n        {resTypeDesc: '页面', resType: 1},\n        {resTypeDesc: '按钮', resType: 2}\n      ],\n      resPidTipMsg: '',\n      searchForm: {\n        name: '',\n        pid: 0\n      },\n      searchList: [],\n      searchName: '',\n      ruleForm: {\n        id: this.$route.params.id,\n        is_hidden: 'false',\n        noDropdown: 'false',\n        icon: '',\n        name: '',\n        route: '',\n        res_uri: '',\n        pid: 0,\n        level: 0,\n        code: '',\n        type: 1\n      }\n    }\n  },\n  created () {\n    if (this.ruleForm.id != 0) {\n      this.routeInfo()\n    }\n  },\n  methods: {\n    // 规则详情\n    async routeInfo () {\n      let params = {\n        id: this.ruleForm.id\n      }\n      let res = await infoRoute(params)\n      console.log(res)\n      if (res.data.code != ERR_OK) {\n        return\n      }\n      let info = res.data.data\n      this.ruleForm.name = info.name\n      this.ruleForm.route = info.route\n      this.ruleForm.type = info.type\n      this.ruleForm.code = info.code\n      this.ruleForm.pid = info.pid\n      this.ruleForm.is_hidden = info.is_hidden\n      this.ruleForm.icon = info.icon\n      this.ruleForm.res_uri = info.res_uri\n      this.ruleForm.level = info.level\n      this.ruleForm.noDropdown = info.noDropdown\n      // 上级元素name\n      if (info.level) {\n        this.levelName(info.level)\n      }\n    },\n    async levelName (levelId) {\n      let params = {\n        id: levelId\n      }\n      let res = await infoRoute(params)\n      if (res.data.code != ERR_OK) {\n        return\n      }\n      let info = res.data.data\n      this.searchName = info.name\n    },\n    // 添加\n    onSubmit (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.add()\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    async add () {\n      let res = await addRoute(this.ruleForm)\n      if (res.data.code == ERR_OK) {\n        this.$router.push({\n          path: '/user/route/list'\n        })\n      }\n    },\n    // 重置\n    resetForm (formName) {\n      this.$refs[formName].resetFields()\n    },\n    // 搜索\n    async handleGetResPid () {\n      let res = await routeSearch(this.searchForm)\n      if (res.data.code != ERR_OK) {\n        return\n      }\n      this.searchList = res.data.data\n      if (this.searchList.length == 0) {\n        this.resPidTipMsg = '无搜索结果'\n      }\n    },\n    chooseResPid (item) {\n      this.ruleForm.level = item.id\n      this.searchName = item.name\n      this.resPidVisible = false\n    }\n  }\n}\n</script>\n\n<style>\n.no-data-show{ width: 100%; padding-top: 15px; text-align: center; color: #999}\n.search-group { max-height: 350px; margin-top: 15px; overflow-y: auto; }\n\n.search-group dl {\n    border-bottom: 1px dotted #eee;\n    padding: 10px ;\n    line-height: 24px;\n    cursor: pointer\n}\n.search-group dl:hover{ background: #F2F6FC}\n\n.search-group dl:last-child {\n    border-bottom: 0\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/router/add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"资源类型：\",\"prop\":\"pid\"}},[_c('el-select',{attrs:{\"size\":\"small\",\"disabled\":_vm.isEdit,\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.pid),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pid\", $$v)},expression:\"ruleForm.pid\"}},_vm._l((_vm.resTypeList),function(item){return _c('el-option',{key:item.resType,attrs:{\"label\":item.resTypeDesc,\"value\":item.resType}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上级资源名称：\"}},[(_vm.ruleForm.pid != 0)?[_c('el-popover',{ref:\"searchPostPopover\",attrs:{\"placement\":\"bottom-start\",\"width\":\"360\"},model:{value:(_vm.resPidVisible),callback:function ($$v) {_vm.resPidVisible=$$v},expression:\"resPidVisible\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入上级资源名称\",\"autofocus\":true,\"size\":\"small\"},model:{value:(_vm.searchForm.name),callback:function ($$v) {_vm.$set(_vm.searchForm, \"name\", $$v)},expression:\"searchForm.name\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleGetResPid},slot:\"append\"})],1),_vm._v(\" \"),(_vm.searchList.length > 0)?_c('div',{staticClass:\"search-group\"},_vm._l((_vm.searchList),function(item ,index){return _c('dl',{key:index,on:{\"click\":function($event){_vm.chooseResPid(item)}}},[_c('dd',[_vm._v(\"资源名称：\"+_vm._s(item.name))])])})):_c('div',{staticClass:\"no-data-show\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.resPidTipMsg)+\"\\n                \")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"popover\",rawName:\"v-popover:searchPostPopover\",arg:\"searchPostPopover\"}],on:{\"click\":function($event){_vm.resPidVisible = true; _vm.resPidTipMsg =''; _vm.searchForm.name ='';_vm.searchList =[]}}},[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"上级资源名称\",\"readonly\":\"\"},model:{value:(_vm.searchName),callback:function ($$v) {_vm.searchName=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"searchName\"}})],1)]:[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"上级资源名称信息\",\"disabled\":\"\"},model:{value:(_vm.searchName),callback:function ($$v) {_vm.searchName=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"searchName\"}})]],2),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限编码：\",\"prop\":\"code\"}},[_c('el-input',{attrs:{\"name\":\"code\",\"type\":\"text\",\"placeholder\":\"编码\"},model:{value:(_vm.ruleForm.code),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"code\", $$v)},expression:\"ruleForm.code\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称：\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"name\":\"name\",\"type\":\"text\",\"placeholder\":\"路由名字\"},model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"路由规则：\",\"prop\":\"route\"}},[_c('el-input',{attrs:{\"name\":\"route\",\"type\":\"text\",\"placeholder\":\"路由规则\"},model:{value:(_vm.ruleForm.route),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"route\", $$v)},expression:\"ruleForm.route\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"图标：\",\"prop\":\"icon\"}},[_c('el-input',{attrs:{\"name\":\"icon\",\"type\":\"text\",\"placeholder\":\"图标\"},model:{value:(_vm.ruleForm.icon),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"icon\", $$v)},expression:\"ruleForm.icon\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"目标地址：\",\"prop\":\"res_uri\"}},[_c('el-input',{attrs:{\"name\":\"res_uri\",\"type\":\"text\",\"placeholder\":\"目标地址\"},model:{value:(_vm.ruleForm.res_uri),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"res_uri\", $$v)},expression:\"ruleForm.res_uri\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否显示：\",\"prop\":\"is_hidden\"}},[_c('el-radio',{attrs:{\"label\":\"false\"},model:{value:(_vm.ruleForm.is_hidden),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"is_hidden\", $$v)},expression:\"ruleForm.is_hidden\"}},[_vm._v(\"否\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"true\"},model:{value:(_vm.ruleForm.is_hidden),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"is_hidden\", $$v)},expression:\"ruleForm.is_hidden\"}},[_vm._v(\"是\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"列表是否显示：\",\"prop\":\"noDropdown\"}},[_c('el-radio',{attrs:{\"label\":\"false\"},model:{value:(_vm.ruleForm.noDropdown),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"noDropdown\", $$v)},expression:\"ruleForm.noDropdown\"}},[_vm._v(\"否\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":\"true\"},model:{value:(_vm.ruleForm.noDropdown),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"noDropdown\", $$v)},expression:\"ruleForm.noDropdown\"}},[_vm._v(\"是\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"路由：\",\"prop\":\"type\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.ruleForm.type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"type\", $$v)},expression:\"ruleForm.type\"}},[_vm._v(\"系统路由\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0},model:{value:(_vm.ruleForm.type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"type\", $$v)},expression:\"ruleForm.type\"}},[_vm._v(\"自定义路由\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.onSubmit('ruleForm')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-27df8cde\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/view/router/add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27df8cde\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=styles&index=0!./add.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27df8cde\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=template&index=0!./add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/router/add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}