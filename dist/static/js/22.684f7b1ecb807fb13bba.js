webpackJsonp([22],{DGJu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Hmpo"),s=a.n(n),r=a("vYJH"),i=a.n(r),o=a("2S+2"),l=a("vMJZ"),c=a("T452"),d=a("rV7I"),u={name:"apis",data:function(){return{apiData:[],userPower:{kong_api_add:0,kong_api_upload:0,kong_api_delete:0}}},created:function(){this.apisLists()},methods:{apisLists:function(){var e=this;return i()(s.a.mark(function t(){var a,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.c)();case 2:return a=t.sent,t.next=5,Object(l.a)();case 5:n=t.sent,e.loading=!0,a.data.code==c.d?(e.apiData=a.data.data,e.loading=!1):Object(d.Message)(a.data.message),n.data.code==c.d&&(e.userPower=n.data.data);case 9:case"end":return t.stop()}},t,e)}))()},handleAdd:function(){this.$router.push({path:"/kong/apis/add"})},handleEdit:function(e){this.$router.push({path:"/kong/apis/edit/"+e})},handleDelete:function(e){var t=this,a=this,n={id:e};this.$confirm("此操作将永久删除服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.d)(n).then(function(e){e.data.code==c.d&&(t.$message({type:"success",message:"删除成功!"}),a.apisLists())})})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._m(0),e._v(" "),a("div",{staticClass:"ibox-content"},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.kong_api_add,expression:"userPower.kong_api_add != 0"}],staticStyle:{"margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd()}}},[e._v("新建Api")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.apiData.data,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hosts",label:"域"}}),e._v(" "),a("el-table-column",{attrs:{prop:"methods",label:"发送方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uris",label:"匹配路径"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upstream_url",label:"转发地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"retries",label:"失败重试次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.kong_api_upload,expression:"userPower.kong_api_upload != 0"}],attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.userPower.kong_api_delete,expression:"userPower.kong_api_delete != 0"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ibox-title"},[t("h3",[this._v("Api 列表")])])}]},_=a("D8HT")(u,p,!1,null,null,null);t.default=_.exports}});
//# sourceMappingURL=22.684f7b1ecb807fb13bba.js.map